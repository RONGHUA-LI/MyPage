<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  建站记录 · RONGHUALI PAGE
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="RONGHUA LI">
<meta name="description" content="
  研究
  
    
    Link to heading
  



# 用于构建和部署Hugo网站到GitHub Pages的工作流程
name: Deploy Hugo site to Pages

on:
  # 在目标为默认分支的推送上运行
  push:
    branches:
      - main

  # 允许您手动从“Actions”标签运行此工作流程
  workflow_dispatch:

# 设置GITHUB_TOKEN的权限，以允许部署到GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write

# 仅允许一个并发部署，跳过在进行中的运行与最新排队的运行之间排队的运行。
# 但是，请不要取消进行中的运行，因为我们希望这些生产部署能够完成。
concurrency:
  group: &#34;pages&#34;
  cancel-in-progress: false

# 默认使用bash
defaults:
  run:
    shell: bash

jobs:
  # 构建作业
  build:
    runs-on: ubuntu-latest
    env:
      HUGO_VERSION: 0.148.1
    steps:
      - name: 安装Hugo CLI
        run: |
          wget -O ${{ runner.temp }}/hugo.deb https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_extended_${HUGO_VERSION}_linux-amd64.deb \
          &amp;&amp; sudo dpkg -i ${{ runner.temp }}/hugo.deb          
      - name: 安装Dart Sass
        run: sudo snap install dart-sass
      - name: 检出
        uses: actions/checkout@v4
        with:
          submodules: recursive
          fetch-depth: 0
      - name: 设置Pages
        id: pages
        uses: actions/configure-pages@v5
      - name: 安装Node.js依赖
        run: &#34;[[ -f package-lock.json || -f npm-shrinkwrap.json ]] &amp;&amp; npm ci || true&#34;
      - name: 使用Hugo构建
        env:
          # 为了与Hugo模块的最大向后兼容性
          HUGO_ENVIRONMENT: production
          HUGO_ENV: production
        run: |
          hugo \
            --gc \
            --minify \
            --baseURL &#34;${{ steps.pages.outputs.base_url }}/&#34;          
      - name: 上传构建产物
        uses: actions/upload-pages-artifact@v3
        with:
          path: ./public

  # 部署作业
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: 部署到GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4


步骤7">
<meta name="keywords" content="blog,study,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="建站记录">
  <meta name="twitter:description" content="研究Link to heading# 用于构建和部署Hugo网站到GitHub Pages的工作流程 name: Deploy Hugo site to Pages on: # 在目标为默认分支的推送上运行 push: branches: - main # 允许您手动从“Actions”标签运行此工作流程 workflow_dispatch: # 设置GITHUB_TOKEN的权限，以允许部署到GitHub Pages permissions: contents: read pages: write id-token: write # 仅允许一个并发部署，跳过在进行中的运行与最新排队的运行之间排队的运行。 # 但是，请不要取消进行中的运行，因为我们希望这些生产部署能够完成。 concurrency: group: &#34;pages&#34; cancel-in-progress: false # 默认使用bash defaults: run: shell: bash jobs: # 构建作业 build: runs-on: ubuntu-latest env: HUGO_VERSION: 0.148.1 steps: - name: 安装Hugo CLI run: | wget -O ${{ runner.temp }}/hugo.deb https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_extended_${HUGO_VERSION}_linux-amd64.deb \ &amp;&amp; sudo dpkg -i ${{ runner.temp }}/hugo.deb - name: 安装Dart Sass run: sudo snap install dart-sass - name: 检出 uses: actions/checkout@v4 with: submodules: recursive fetch-depth: 0 - name: 设置Pages id: pages uses: actions/configure-pages@v5 - name: 安装Node.js依赖 run: &#34;[[ -f package-lock.json || -f npm-shrinkwrap.json ]] &amp;&amp; npm ci || true&#34; - name: 使用Hugo构建 env: # 为了与Hugo模块的最大向后兼容性 HUGO_ENVIRONMENT: production HUGO_ENV: production run: | hugo \ --gc \ --minify \ --baseURL &#34;${{ steps.pages.outputs.base_url }}/&#34; - name: 上传构建产物 uses: actions/upload-pages-artifact@v3 with: path: ./public # 部署作业 deploy: environment: name: github-pages url: ${{ steps.deployment.outputs.page_url }} runs-on: ubuntu-latest needs: build steps: - name: 部署到GitHub Pages id: deployment uses: actions/deploy-pages@v4 步骤7">

<meta property="og:url" content="ronghua.cn/researches/%E7%A0%94%E7%A9%B61/">
  <meta property="og:site_name" content="RONGHUALI PAGE">
  <meta property="og:title" content="建站记录">
  <meta property="og:description" content="研究Link to heading# 用于构建和部署Hugo网站到GitHub Pages的工作流程 name: Deploy Hugo site to Pages on: # 在目标为默认分支的推送上运行 push: branches: - main # 允许您手动从“Actions”标签运行此工作流程 workflow_dispatch: # 设置GITHUB_TOKEN的权限，以允许部署到GitHub Pages permissions: contents: read pages: write id-token: write # 仅允许一个并发部署，跳过在进行中的运行与最新排队的运行之间排队的运行。 # 但是，请不要取消进行中的运行，因为我们希望这些生产部署能够完成。 concurrency: group: &#34;pages&#34; cancel-in-progress: false # 默认使用bash defaults: run: shell: bash jobs: # 构建作业 build: runs-on: ubuntu-latest env: HUGO_VERSION: 0.148.1 steps: - name: 安装Hugo CLI run: | wget -O ${{ runner.temp }}/hugo.deb https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_extended_${HUGO_VERSION}_linux-amd64.deb \ &amp;&amp; sudo dpkg -i ${{ runner.temp }}/hugo.deb - name: 安装Dart Sass run: sudo snap install dart-sass - name: 检出 uses: actions/checkout@v4 with: submodules: recursive fetch-depth: 0 - name: 设置Pages id: pages uses: actions/configure-pages@v5 - name: 安装Node.js依赖 run: &#34;[[ -f package-lock.json || -f npm-shrinkwrap.json ]] &amp;&amp; npm ci || true&#34; - name: 使用Hugo构建 env: # 为了与Hugo模块的最大向后兼容性 HUGO_ENVIRONMENT: production HUGO_ENV: production run: | hugo \ --gc \ --minify \ --baseURL &#34;${{ steps.pages.outputs.base_url }}/&#34; - name: 上传构建产物 uses: actions/upload-pages-artifact@v3 with: path: ./public # 部署作业 deploy: environment: name: github-pages url: ${{ steps.deployment.outputs.page_url }} runs-on: ubuntu-latest needs: build steps: - name: 部署到GitHub Pages id: deployment uses: actions/deploy-pages@v4 步骤7">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="researches">
    <meta property="article:published_time" content="2025-07-25T10:10:49+08:00">
    <meta property="article:modified_time" content="2025-07-25T10:10:49+08:00">
    <meta property="article:tag" content="Hugo">
      <meta property="og:see_also" content="ronghua.cn/blogs/%E5%BB%BA%E7%AB%99%E8%AE%B0%E5%BD%95/">




<link rel="canonical" href="ronghua.cn/researches/%E7%A0%94%E7%A9%B61/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="ronghua.cn/css/coder.min.6445a802b9389c9660e1b07b724dcf5718b1065ed2d71b4eeaf981cc7cc5fc46.css" integrity="sha256-ZEWoArk4nJZg4bB7ck3PVxixBl7S1xtO6vmBzHzF/EY=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="ronghua.cn/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css" integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/svg+xml" href="/img/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="ronghua.cn/">
      RONGHUALI PAGE
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/ronghua.cn/researches/">Research</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/ronghua.cn/blogs/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/ronghua.cn/about/">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container page">
  <article>
    <header>
      <h1 class="title">
        <a class="title-link" href="ronghua.cn/researches/%E7%A0%94%E7%A9%B61/">
          建站记录
        </a>
      </h1>
    </header>

    <h1 id="研究">
  研究
  <a class="heading-link" href="#%e7%a0%94%e7%a9%b6">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<ul>
<li>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#007f7f"># 用于构建和部署Hugo网站到GitHub Pages的工作流程</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">name</span>: Deploy Hugo site to Pages
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">on</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f"># 在目标为默认分支的推送上运行</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">push</span>:
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">branches</span>:
</span></span><span style="display:flex;"><span>      - main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f"># 允许您手动从“Actions”标签运行此工作流程</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">workflow_dispatch</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 设置GITHUB_TOKEN的权限，以允许部署到GitHub Pages</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">permissions</span>:
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">contents</span>: read
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">pages</span>: write
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">id-token</span>: write
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 仅允许一个并发部署，跳过在进行中的运行与最新排队的运行之间排队的运行。</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 但是，请不要取消进行中的运行，因为我们希望这些生产部署能够完成。</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">concurrency</span>:
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">group</span>: <span style="color:#0ff;font-weight:bold">&#34;pages&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">cancel-in-progress</span>: <span style="color:#fff;font-weight:bold">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 默认使用bash</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">defaults</span>:
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">run</span>:
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">shell</span>: bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">jobs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f"># 构建作业</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">build</span>:
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">runs-on</span>: ubuntu-latest
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">env</span>:
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">HUGO_VERSION</span>: <span style="color:#ff0;font-weight:bold">0.148.1</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">steps</span>:
</span></span><span style="display:flex;"><span>      - <span style="font-weight:bold">name</span>: 安装Hugo CLI
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">run</span>: |<span style="color:#0ff;font-weight:bold">
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">          wget -O ${{ runner.temp }}/hugo.deb https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_extended_${HUGO_VERSION}_linux-amd64.deb \
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">          &amp;&amp; sudo dpkg -i ${{ runner.temp }}/hugo.deb          </span>
</span></span><span style="display:flex;"><span>      - <span style="font-weight:bold">name</span>: 安装Dart Sass
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">run</span>: sudo snap install dart-sass
</span></span><span style="display:flex;"><span>      - <span style="font-weight:bold">name</span>: 检出
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">uses</span>: actions/checkout@v4
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">with</span>:
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">submodules</span>: recursive
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">fetch-depth</span>: <span style="color:#ff0;font-weight:bold">0</span>
</span></span><span style="display:flex;"><span>      - <span style="font-weight:bold">name</span>: 设置Pages
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">id</span>: pages
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">uses</span>: actions/configure-pages@v5
</span></span><span style="display:flex;"><span>      - <span style="font-weight:bold">name</span>: 安装Node.js依赖
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">run</span>: <span style="color:#0ff;font-weight:bold">&#34;[[ -f package-lock.json || -f npm-shrinkwrap.json ]] &amp;&amp; npm ci || true&#34;</span>
</span></span><span style="display:flex;"><span>      - <span style="font-weight:bold">name</span>: 使用Hugo构建
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">env</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#007f7f"># 为了与Hugo模块的最大向后兼容性</span>
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">HUGO_ENVIRONMENT</span>: production
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">HUGO_ENV</span>: production
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">run</span>: |<span style="color:#0ff;font-weight:bold">
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">          hugo \
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            --gc \
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            --minify \
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            --baseURL &#34;${{ steps.pages.outputs.base_url }}/&#34;          </span>
</span></span><span style="display:flex;"><span>      - <span style="font-weight:bold">name</span>: 上传构建产物
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">uses</span>: actions/upload-pages-artifact@v3
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">with</span>:
</span></span><span style="display:flex;"><span>          <span style="font-weight:bold">path</span>: ./public
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f"># 部署作业</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">deploy</span>:
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">environment</span>:
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">name</span>: github-pages
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">url</span>: ${{ steps.deployment.outputs.page_url }}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">runs-on</span>: ubuntu-latest
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">needs</span>: build
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">steps</span>:
</span></span><span style="display:flex;"><span>      - <span style="font-weight:bold">name</span>: 部署到GitHub Pages
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">id</span>: deployment
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">uses</span>: actions/deploy-pages@v4
</span></span></code></pre></div></li>
<li>
<p>步骤7</p>
<p>使用类似&quot;Add workflow&quot;的提交消息将更改提交到本地仓库，并推送到GitHub。</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#007f7f"># 添加远程仓库, origin作为别名</span>
</span></span><span style="display:flex;"><span>git remote add origin https<span style="color:#f00">:</span>//github.io/&lt;username&gt;.github.io
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git commit  -m <span style="color:#0ff;font-weight:bold">&#39;Add workflow&#39;</span>
</span></span><span style="display:flex;"><span>git push origin main
</span></span></code></pre></div></li>
<li>
<p>步骤8</p>
<p>从GitHub的主菜单中选择<strong>Actions</strong>。你会看到如下内容：</p>
<p><img src="https://hugo.opendocs.io/hosting-and-deployment/hosting-on-github/gh-pages-3.png" alt="屏幕截图"></p>
<p>当GitHub完成构建和部署您的站点后，状态指示器的颜色将变为蓝色。</p>
<p>将来，每当您从本地仓库推送更改时，GitHub都会重新构建您的站点并部署更改。</p>
</li>
</ul>
<p>上面的示例工作流程包括以下步骤，通常需要10-15秒：</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>- <span style="font-weight:bold">name</span>: 安装Dart Sass
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">run</span>: sudo snap install dart-sass
</span></span></code></pre></div><p>如果您的站点、主题和模块不使用<a href="https://hugo.opendocs.io/hugo-pipes/transpile-sass-to-css/#dart-sass"  class="external-link" target="_blank" rel="noopener">Dart Sass</a>转译Sass到CSS，您可以删除此步骤。</p>

  </article>
</section>

  

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2025
     RONGHUA LI 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="ronghua.cn/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
